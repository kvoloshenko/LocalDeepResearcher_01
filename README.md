# LocalDeepResearcher_01


# üß† Local Deep Researcher (–ª–æ–∫–∞–ª—å–Ω—ã–π –≥–ª—É–±–æ–∫–∏–π –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å)

![LocalDeepResearcher_01.png](Images/LocalDeepResearcher_01.png)

**Local Deep Researcher** ‚Äî —ç—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ª–æ–∫–∞–ª—å–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –≤–µ–±-–∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π –∏ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –æ—Ç—á—ë—Ç–æ–≤, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –Ω–∞ –±–∞–∑–µ **LangGraph** –∏ **–ª–æ–∫–∞–ª—å–Ω—ã—Ö LLM** (—á–µ—Ä–µ–∑ **Ollama** –∏–ª–∏ **LMStudio**).

–î–∞–π—Ç–µ –µ–º—É —Ç–µ–º—É –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è ‚Äî –∏ –æ–Ω —Å–∞–º:

- —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã;
- –≤—ã–ø–æ–ª–Ω–∏—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ü–∏–∫–ª–æ–≤ –≤–µ–±-–ø–æ–∏—Å–∫–∞;
- –∑–∞–∫–æ–Ω—Å–ø–µ–∫—Ç–∏—Ä—É–µ—Ç –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã;
- –Ω–∞–π–¥—ë—Ç –ø—Ä–æ–±–µ–ª—ã –≤ –ø–æ–Ω–∏–º–∞–Ω–∏–∏ —Ç–µ–º—ã;
- –∑–∞–¥–∞—Å—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Ç–æ—á–Ω—è—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã;
- —Å–æ–±–µ—Ä—ë—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π **markdown-–æ—Ç—á—ë—Ç** —Å —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∏.

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π GitHub (–æ—Ä–∏–≥–∏–Ω–∞–ª):  
<https://github.com/langchain-ai/local-deep-researcher>

–í–∏–¥–µ–æ (English 15 –º–∏–Ω—É—Ç) Building a fully local research assistant from scratch with Ollama:
<https://youtu.be/XGuTzHoqlj8?si=3Tv513xJJg-ydIz7>

–ö–æ–Ω—Å–ø–µ–∫—Ç (English):
<https://mirror-feeling-d80.notion.site/Fully-Local-Research-Summarization-157808527b1780bfa5e5f4650630ae08>

---

## ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîí **–ü–æ–ª–Ω–æ—Å—Ç—å—é –ª–æ–∫–∞–ª—å–Ω–∞—è LLM**  
  –ú–æ–¥–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ **Ollama** –∏–ª–∏ **LMStudio**. 

- üåê **–ì–∏–±–∫–∏–π –≤–µ–±-–ø–æ–∏—Å–∫**
  - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî **DuckDuckGo** (–±–µ–∑ API-–∫–ª—é—á–µ–π).
  - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è:
    - **SearXNG**,
    - **Tavily**,
    - **Perplexity**.  
  –í—ã–±–æ—Ä –∑–∞–¥–∞—ë—Ç—Å—è –≤ `.env` —á–µ—Ä–µ–∑ `SEARCH_API`.


- üï∏ **–ò—Ç–µ—Ä–∞—Ç–∏–≤–Ω—ã–π Deep Research-–ø–æ–¥—Ö–æ–¥**  
  –ü–æ–¥—Ö–æ–¥ –≤–¥–æ—Ö–Ω–æ–≤–ª—ë–Ω —Ä–∞–±–æ—Ç–∞–º–∏ —Ç–∏–ø–∞ **IterDRAG**:
  - —Ç–µ–º–∞ —Ä–∞–∑–±–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –ø–æ–¥–∑–∞–ø—Ä–æ—Å—ã,
  - –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–¥–∑–∞–ø—Ä–æ—Å–∞ –∏—â—É—Ç—Å—è –¥–æ–∫—É–º–µ–Ω—Ç—ã,
  - —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è —á–∞—Å—Ç–∏—á–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã,
  - –≤—ã—è–≤–ª—è—é—Ç—Å—è –ø—Ä–æ–±–µ–ª—ã –≤ –∑–Ω–∞–Ω–∏—è—Ö,
  - —Å—Ç—Ä–æ—è—Ç—Å—è –Ω–æ–≤—ã–µ —É—Ç–æ—á–Ω—è—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã,
  - –∏—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á—ë—Ç —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏—Ç–µ—Ä–∞—Ü–∏–π.


- üß© **LangGraph-–≥—Ä–∞—Ñ —Å –≤–∏–∑—É–∞–ª—å–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º**  
  –ü—Ä–æ—Ü–µ—Å—Å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–∞–∫ –≥—Ä–∞—Ñ –≤ **LangGraph**.  
  –ß–µ—Ä–µ–∑ **LangGraph Studio** –º–æ–∂–Ω–æ:
  - –Ω–∞–±–ª—é–¥–∞—Ç—å —Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≥—Ä–∞—Ñ–∞;
  - —Å–º–æ—Ç—Ä–µ—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ (state) –∏ —Å–ø–∏—Å–æ–∫ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤;
  - –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç.


- üì¶ **–ì–æ—Ç–æ–≤ –∫ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—é**  
  –í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –µ—Å—Ç—å:
  - `langgraph.json` ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∞,
  - `pyproject.toml` ‚Äî –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏,
  - `Dockerfile` ‚Äî –∑–∞–ø—É—Å–∫–∞–µ—Ç LangGraph-—Å–µ—Ä–≤–∏—Å —Å —ç—Ç–∏–º –≥—Ä–∞—Ñ–æ–º,
  - `.env.example` ‚Äî –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

---

## üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ)

Local Deep Researcher ‚Äî —ç—Ç–æ LangGraph-–≥—Ä–∞—Ñ, –∫–æ—Ç–æ—Ä—ã–π –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç:

![graph.PNG](Images/graph.PNG)

1. **–£–∑–µ–ª –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞**  
   - –ø–æ–ª—É—á–∞–µ—Ç —Ç–µ–º—É –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è;
   - —Å –ø–æ–º–æ—â—å—é –ª–æ–∫–∞–ª—å–Ω–æ–π LLM —Ñ–æ—Ä–º—É–ª–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞ –∫ –≤–µ–±-–ø–æ–∏—Å–∫—É.


2. **–£–∑–µ–ª –≤–µ–±-–ø–æ–∏—Å–∫–∞**  
   - –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É API (`duckduckgo`, `tavily`, `perplexity`, `searxng`);
   - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Å—Å—ã–ª–æ–∫ + (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç —Å—Ç—Ä–∞–Ω–∏—Ü.


3. **–£–∑–µ–ª —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏**  
   - —á–∏—Ç–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞;
   - –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∫–ª—é—á–µ–≤—ã–µ —Ç–µ–∑–∏—Å—ã;
   - —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –æ–±–∑–æ—Ä –≤ –≤–∏–¥–µ markdown.


4. **–£–∑–µ–ª —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏**  
   - –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–µ–∫—É—â–∏–π –æ–±–∑–æ—Ä;
   - –≤—ã—è–≤–ª—è–µ—Ç, –∫–∞–∫–æ–π –≤–∞–∂–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –µ—â—ë –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç;
   - —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–π –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å, –∑–∞–∫—Ä—ã–≤–∞—é—â–∏–π –ø—Ä–æ–±–µ–ª—ã.


5. **–¶–∏–∫–ª–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç—É—Ä**  
   - –≥—Ä–∞—Ñ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç: –ø–æ–∏—Å–∫ ‚Üí —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è ‚Üí —Ä–µ—Ñ–ª–µ–∫—Å–∏—è;
   - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ü–∏–∫–ª–æ–≤ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `MAX_WEB_RESEARCH_LOOPS`.


6. **–£–∑–µ–ª —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç—á—ë—Ç–∞**  
   - —Å–æ–±–∏—Ä–∞–µ—Ç –≤—Å–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏, –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∏ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –≤—ã–≤–æ–¥—ã;
   - —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∏—Ç–æ–≥–æ–≤—ã–π markdown-–æ—Ç—á—ë—Ç —Å —Ü–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤;
   - –ø–æ–º–µ—â–∞–µ—Ç –æ—Ç—á—ë—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≥—Ä–∞—Ñ–∞, –¥–æ—Å—Ç—É–ø–Ω–æ–µ —á–µ—Ä–µ–∑ LangGraph Studio.

---

# üß©  –ö—Ä–∞—Ç–∫–∏–π –æ–±–∑–æ—Ä –∫–æ–¥–∞

–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥—ë–Ω –æ–±–∑–æ—Ä –º–æ–¥—É–ª–µ–π –∏ –∫–ª—é—á–µ–≤–æ–π –ª–æ–≥–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞, —á—Ç–æ–±—ã —É–ø—Ä–æ—Å—Ç–∏—Ç—å –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤ –∫–æ–¥–æ–≤—É—é –±–∞–∑—É.

---

## **1. `configuration.py` ‚Äî –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞**

–°–æ–¥–µ—Ä–∂–∏—Ç –∫–ª–∞—Å—Å **`Configuration`**, –∫–æ—Ç–æ—Ä—ã–π:

* –∑–∞–≥—Ä—É–∂–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ `.env` –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∑–∞–ø—É—Å–∫–∞;
* –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç:

  * –º–æ–¥–µ–ª—å LLM (`local_llm`);
  * –ø—Ä–æ–≤–∞–π–¥–µ—Ä (`ollama` –∏–ª–∏ `lmstudio`);
  * –ø–æ–∏—Å–∫–æ–≤—ã–π API (`duckduckgo`, `tavily`, `perplexity`, `searxng`);
  * –≥–ª—É–±–∏–Ω—É —Ä–µ—Å—ë—Ä—á–∞ (`max_web_research_loops`);
  * URL-–∞–¥—Ä–µ—Å –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ LLM;
  * –≤–∫–ª—é—á–µ–Ω–∏–µ tool calling –∏–ª–∏ JSON-mode.

–¢–∞–∫–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ **`SearchAPI`** –∏ —Ñ–∞–±—Ä–∏–∫—É `from_runnable_config()`.

---

## **2. `lmstudio.py` ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LMStudio**

–†–∞—Å—à–∏—Ä—è–µ—Ç –∫–ª–∞—Å—Å `ChatOpenAI`, —Å–æ–∑–¥–∞–≤–∞—è –∞–¥–∞–ø—Ç–µ—Ä **ChatLMStudio**, –∫–æ—Ç–æ—Ä—ã–π:

* —Å–æ–≤–º–µ—Å—Ç–∏–º —Å LMStudio API (`http://localhost:1234/v1`);
* –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `format="json"` ‚Äî JSON mode –∫–∞–∫ —É OpenAI GPT;
* –¥–µ–ª–∞–µ—Ç –∞–≤—Ç–æ–¥–æ—á–∏—Å—Ç–∫—É JSON-–æ—Ç–≤–µ—Ç–æ–≤;
* –ª–æ–≥–∏—Ä—É–µ—Ç —Å—ã—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –µ—Å–ª–∏ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤—ã–±—Ä–∞–Ω –ø—Ä–æ–≤–∞–π–¥–µ—Ä `lmstudio`.

---

## **3. `state.py` ‚Äî –§–æ—Ä–º–∞—Ç —Ö—Ä–∞–Ω–∏–º–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è**

–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–ª–∞—Å—Å—ã:

* `SummaryState` ‚Äî —Å–æ—Å—Ç–æ—è–Ω–∏–µ —É–∑–ª–æ–≤ –≥—Ä–∞—Ñ–∞:

  * —Ç–µ–º–∞ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è,
  * –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å,
  * —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–µ–±-–ø–æ–∏—Å–∫–∞,
  * –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏,
  * –∏—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á—ë—Ç.

* `SummaryStateInput` / `SummaryStateOutput` ‚Äî –≤—Ö–æ–¥ –∏ –≤—ã—Ö–æ–¥ –≥—Ä–∞—Ñ–∞.

State —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –≥–ª–æ–±–∞–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å –º–µ–∂–¥—É —à–∞–≥–∞–º–∏ –≥—Ä–∞—Ñ–∞.

---

## **4. `prompts.py` ‚Äî –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è LLM**

–°–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ —à–∞–±–ª–æ–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π:

* `query_writer_instructions` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞;
* `summarizer_instructions` ‚Äî —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤;
* `reflection_instructions` ‚Äî –ø–æ–∏—Å–∫ –ø—Ä–æ–±–µ–ª–æ–≤ –≤ –∑–Ω–∞–Ω–∏—è—Ö;
* –≤–µ—Ä—Å–∏–∏ –ø–æ–¥ JSON-mode –∏ ToolCalling-mode.

–¢–∞–∫–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —É—Ç–∏–ª–∏—Ç—É `get_current_date()`.

---

## **5. `utils.py` ‚Äî –£—Ç–∏–ª–∏—Ç—ã –≤–µ–±-–ø–æ–∏—Å–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö**

–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

### üîç –í–µ–±-–ø–æ–∏—Å–∫

* `duckduckgo_search`
* `tavily_search`
* `perplexity_search`
* `searxng_search`

–õ—é–±–æ–π –∏–∑ —ç—Ç–∏—Ö API –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–±—Ä–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.

### üßπ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

* `deduplicate_and_format_sources()` ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤, —É–¥–∞–ª—è–µ—Ç –¥—É–±–ª–∏;
* `format_sources()` ‚Äî –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å—Å—ã–ª–æ–∫.

### üßΩ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è

* `strip_thinking_tokens()` ‚Äî —É–¥–∞–ª—è–µ—Ç `<think>`-—Ç–æ–∫–µ–Ω—ã –º–æ–¥–µ–ª–µ–π deepseek-r1.

---

## **6. `graph.py` ‚Äî –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ Local Deep Researcher**

–≠—Ç–æ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª –ø—Ä–æ–µ–∫—Ç–∞.
–°–æ–¥–µ—Ä–∂–∏—Ç:

### **–£–∑–ª—ã –≥—Ä–∞—Ñ–∞:**

1. **`generate_query()`**
   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç LLM ‚Üí —Å–æ–∑–¥–∞—ë—Ç –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å.

2. **`web_research()`**
   –î–µ–ª–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π –≤–µ–±-–ø–æ–∏—Å–∫ —á–µ—Ä–µ–∑ –≤—ã–±—Ä–∞–Ω–Ω—ã–π API.

3. **`summarize_sources()`**
   –û–±–Ω–æ–≤–ª—è–µ—Ç –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –æ–±–∑–æ—Ä (running summary).

4. **`reflect_on_summary()`**
   –ù–∞—Ö–æ–¥–∏—Ç –ø—Ä–æ–±–µ–ª—ã, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É—Ç–æ—á–Ω—è—é—â–∏–π –∑–∞–ø—Ä–æ—Å.

5. **`finalize_summary()`**
   –°–æ–±–∏—Ä–∞–µ—Ç –∏—Ç–æ–≥–æ–≤—ã–π markdown-–æ—Ç—á—ë—Ç –∏
   ‚ûú **—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –µ–≥–æ –≤ —Ñ–∞–π–ª `report.md`**.

### **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è:**

`route_research()` —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ü–∏–∫–ª–æ–º:

```
query ‚Üí search ‚Üí summary ‚Üí reflection ‚Üí (loop)
```

–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ü–∏–∫–ª–æ–≤ –∑–∞–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ `MAX_WEB_RESEARCH_LOOPS`.

### **–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞:**

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:

```python
StateGraph(...)
.add_node(...)
.add_edge(...)
.compile()
```

–ì—Ä–∞—Ñ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ **LangGraph Studio**.


---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.11+
- Ollama (—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∏ –∑–∞–ø—É—â–µ–Ω–Ω—ã–π)
- –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ Python (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
LocalDeepResearcher_01/
‚îú‚îÄ‚îÄ venv/
‚îú‚îÄ‚îÄ local-deep-researcher/
‚îÇ   ‚îú‚îÄ‚îÄ graph.py
‚îÇ   ‚îú‚îÄ‚îÄ configuration.py
‚îÇ   ‚îú‚îÄ‚îÄ lmstudio.py
‚îÇ   ‚îú‚îÄ‚îÄ prompts.py
‚îÇ   ‚îú‚îÄ‚îÄ state.py
‚îÇ   ‚îú‚îÄ‚îÄ utils.py
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt



```

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç LangGraph –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞ —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ LLM —á–µ—Ä–µ–∑ Ollama
- –í–∫–ª—é—á–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–∏—Å–∫–∞ —á–µ—Ä–µ–∑ Tavily –∏–ª–∏ DuckDuckGo
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∞–≥–µ–Ω—Ç–∞

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# Windows
C:\_AI\DeepAgents_01\venv\Scripts\activate

# Linux/Mac
source venv/bin/activate
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ pip

```bash
python.exe -m pip install --upgrade pip
```

### 3. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/langchain-ai/local-deep-researcher.git
cd local-deep-researcher
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π Ollama

```bash
ollama list
```

### 5. –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ deepseek-r1 (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞)

```bash
ollama pull deepseek-r1:8b
```

### 6. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –ø—Ä–æ–µ–∫—Ç–∞

```bash
pip install -e .
```

### 7. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ LangGraph CLI

```bash
pip install -U "langgraph-cli[inmem]"
```

### 8. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env

–°–º. `.env.example` ‚Äî –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

```
# Which search service to use, either 'duckduckgo', 'tavily', 'perplexity', Searxng
SEARCH_API='duckduckgo'
# For Searxng search, defaults to http://localhost:8888
SEARXNG_URL=

# Web Search API Keys (choose one or both)
TAVILY_API_KEY=tvly-xxxxx      # Get your key at https://tavily.com
PERPLEXITY_API_KEY=pplx-xxxxx  # Get your key at https://www.perplexity.ai

# LLM Configuration
LLM_PROVIDER=lmstudio          # Options: ollama, lmstudio
LOCAL_LLM=qwen_qwq-32b         # Model name in LMStudio/Ollama
LMSTUDIO_BASE_URL=http://localhost:1234/v1  # LMStudio OpenAI-compatible API URL
OLLAMA_BASE_URL=http://localhost:11434 # the endpoint of the Ollama service, defaults to http://localhost:11434 if not set

MAX_WEB_RESEARCH_LOOPS=3
FETCH_FULL_PAGE=True
```

### 9. –ó–∞–ø—É—Å–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–µ—Å–∫–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

```bash
langgraph dev
```

## –ü—Ä–∏–º–µ—Ä—ã:

![LangGraphStudio_01.png](Images/LangGraphStudio_01.png)

![LangGraphStudio_011.png](Images/LangGraphStudio_011.png)

![LangGraphStudio_02.png](Images/LangGraphStudio_02.png)

![LangGraphStudio_03.png](Images/LangGraphStudio_03.png)

–ü–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç—á–µ—Ç: [report.md](report.md)

---
# üîß –ö–∞–∫ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –≥—Ä–∞—Ñ –∞–≥–µ–Ω—Ç–∞

–≠—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ –ª–µ–≥–∫–æ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è ‚Äî LangGraph –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —É–∑–ª—ã –∏ –º–∞—Ä—à—Ä—É—Ç—ã.

–ù–∏–∂–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–¥–µ–π:

---

## üìå 1. –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–∏–ø –≤–µ–±-–ø–æ–∏—Å–∫–∞
–ü—Ä–∏–º–µ—Ä: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Bing API.

- —Ä–µ–∞–ª–∏–∑—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é `bing_search(query)`,
- –¥–æ–±–∞–≤–ª—è–µ–º –µ—ë –≤ `utils.py`,
- —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –≤ `web_research()`:

```python
elif search_api == "bing":
    search_results = bing_search(state.search_query)
````

* –¥–æ–±–∞–≤–ª—è–µ–º –≤—ã–±–æ—Ä –≤ `Configuration.search_api`.

---

## üìå 2. –î–æ–±–∞–≤–∏—Ç—å —É–∑–µ–ª ¬´–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤¬ª

–ü—Ä–∏–º–µ—Ä –Ω–æ–≤–æ–≥–æ —É–∑–ª–∞:

```python
def classify_sources(state, config):
    # LLM –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
    ...
    return {"classified_sources": results}
```

–î–æ–±–∞–≤–ª—è–µ–º –≤ –≥—Ä–∞—Ñ:

```python
builder.add_node("classify_sources", classify_sources)
builder.add_edge("web_research", "classify_sources")
builder.add_edge("classify_sources", "summarize_sources")
```

---

## üìå 3. –î–æ–±–∞–≤–∏—Ç—å —É–∑–µ–ª ¬´–û—Ü–µ–Ω–∫–∞ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏¬ª

–ü—Ä–∏–º–µ—Ä: LLM –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∏ –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥ –¥–æ–≤–µ—Ä–∏—è.

---

## üìå 4. –í–∫–ª—é—á–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –≤—ã–∑–æ–≤ (Tool Calling)

–ù–∞ —ç—Ç–∞–ø–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–∞ –∏ —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤ `.env` –≤–∫–ª—é—á–∏—Ç—å:

```
USE_TOOL_CALLING=true
```

–í –∫–æ–¥–µ —É–∂–µ –≤—Å—ë —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ.

---

## üìå 5. –î–æ–±–∞–≤–∏—Ç—å —ç–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–∞ –≤ PDF

–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —É–∑–µ–ª:

```python
def export_pdf(state):
    markdown_to_pdf(state.running_summary, "report.pdf")
```

–î–æ–±–∞–≤–∏—Ç—å –ø–æ—Å–ª–µ `finalize_summary`.

---

## üìå 6. –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Ä–æ–ª—å –∞–≥–µ–Ω—Ç–∞

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤:

* ¬´–∞–Ω–∞–ª–∏—Ç–∏–∫¬ª,
* ¬´—Ä–µ–¥–∞–∫—Ç–æ—Ä¬ª,
* ¬´—Ñ–∞–∫—Ç-—á–µ–∫–µ—Ä¬ª.

–ö–∞–∂–¥—ã–π –±—É–¥–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–º —É–∑–ª–æ–º –≤ –≥—Ä–∞—Ñ–µ.

---